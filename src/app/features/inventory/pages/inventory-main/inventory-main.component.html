<div class="inventory-container">
  <div class="header">
    <h1>
      <i class="bi bi-box-seam"></i> Meu Inventário
    </h1>
    <div class="sort-controls">
      <label for="sort">Ordenar por:</label>
      <select id="sort" [value]="sortBy" (change)="onSortChange($event)" class="sort-select">
        <option value="rarity">Raridade</option>
        <option value="date">Data de Obtenção</option>
        <option value="quantity">Quantidade</option>
      </select>
    </div>
  </div>

  <div *ngIf="loading" class="loading">
    <i class="bi bi-arrow-repeat spin"></i> Carregando inventário...
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && sortedItems.length === 0" class="empty-inventory">
    <i class="bi bi-inbox"></i>
    <h2>Inventário Vazio</h2>
    <p>Você ainda não possui nenhum item. Que tal girar o gacha?</p>
    <a routerLink="/gacha" class="btn-gacha">
      <i class="bi bi-dice-5"></i> Ir para o Gacha
    </a>
  </div>

  <div *ngIf="!loading && !error && sortedItems.length > 0" class="items-grid">
    <div class="item-card" *ngFor="let inventoryItem of sortedItems" [style.border-color]="getRarityColor(inventoryItem.rarity)">
      <div class="item-rarity-badge" [style.background]="getRarityColor(inventoryItem.rarity)">
        <i [class]="'bi ' + getRarityIcon(inventoryItem.rarity)"></i>
        {{ getRarityTier(inventoryItem.rarity) }}
      </div>
      
      <div class="item-image">
        <img [src]="inventoryItem.item.imageUrl" [alt]="inventoryItem.item.name">
      </div>
      
      <div class="item-info">
        <h3>{{ inventoryItem.item.name }}</h3>
        
        <div class="item-rarity" [style.color]="getRarityColor(inventoryItem.rarity)">
          <i class="bi bi-stars"></i>
          <span class="rarity-value">{{ inventoryItem.rarity }}</span>
          <span class="rarity-max">/ 1000</span>
        </div>
        
        <div class="item-stats">
          <div class="stat">
            <i class="bi bi-stack"></i>
            <span>{{ inventoryItem.quantity }}x</span>
          </div>
          <div class="stat">
            <i class="bi bi-calendar-check"></i>
            <span>{{ inventoryItem.obtainedAt?.toDate?.() | date:'dd/MM/yy' || '—' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
